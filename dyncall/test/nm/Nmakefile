#///////////////////////////////////////////////////
#
#	nmake makefile
#	Copyright 2007 Tassilo Philipp
#	Nmakefile
#
#///////////////////////////////////////////////////


TOP = ..\..

!INCLUDE $(TOP)\buildsys\nmake\prolog.nmake


!IF "$(BUILD_OS)" == "windows"

TARGETS = nm.exe
OBJS = nm.obj# ..\testmain\main_ansic.obj

$(TARGETS): $(OBJS)
	echo Linking $@ ...
	$(LD) /OUT:"$@" $(LDFLAGS) $(OBJS) $(TOP)\dynload\libdynload_s.lib $(TOP)\dyncall\libdyncall_s.lib > nul


!ELSE IF "$(BUILD_OS)" == "nds"

TARGETS = nm.nds
OBJS = nm.o# ..\testmain\main_NDS.o

$(TARGETS):# $(OBJS)
	echo Not building dynload: There is no dynload support on this platform.
#	echo Linking $@ ...
#	$(LD) $(LDFLAGS) $(OBJS) $(DEVKITPRO_PATH)\libnds\lib\libnds9.a $(TOP)\dynload\libdynload_s.a $(TOP)/dyncall/libdyncall_s.a -o "$(@B).elf"
#	$(OCP) -O binary "$(@B).elf" "$(@B).arm9"
#	ndstool -c "$@" -9 "$(@B).arm9"
#	del "$(@B).elf" "$(@B).arm9"

!ENDIF


!INCLUDE $(TOP)\buildsys\nmake\epilog.nmake

